<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Generic Views &mdash; DartCMS 0.0.2 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="DartCMS 0.0.2 documentation" href="index.html" />
    <link rel="prev" title="Dynamic Models Loading" href="dynamic_loading.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="generic-views">
<h1>Generic Views<a class="headerlink" href="#generic-views" title="Permalink to this headline">¶</a></h1>
<p>DartCMS admin panel is based on few generic views. You will use them in your apps as base for their management tools.
Basically, these views are implementing CRUD features for your apps.</p>
<div class="section" id="views-configuration">
<h2>Views Configuration<a class="headerlink" href="#views-configuration" title="Permalink to this headline">¶</a></h2>
<p>As configuration mechanism in the DartCMS, we will use simple class named <cite>DartCMSConfig</cite>.
It&#8217;s placed into <cite>dartcms.utils.config</cite> package. Here is it&#8217;s implementation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">DartCMSConfig</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">config</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">base</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="o">...</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">grid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span>
        <span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;grid&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">config</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span>
        <span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;form&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">config</span>
</pre></div>
</div>
<p>As you can see, it&#8217;s pretty simple. You can pass some <cite>dict</cite> to its constructor and then access grid and form confiration
via <cite>grid</cite> and <cite>form</cite> properties of resulted object. In the next examples, you&#8217;ll see how to do it.</p>
</div>
<div class="section" id="dartcms-views-gridview">
<h2>dartcms.views.GridView<a class="headerlink" href="#dartcms-views-gridview" title="Permalink to this headline">¶</a></h2>
<p>This view is inherited from <cite>django.views.generic.ListView</cite> and implements functionality for datagrids.
<cite>dartcms.views.GridView</cite> class includes some configuration options:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">GridView</span><span class="p">(</span><span class="n">AdminMixin</span><span class="p">,</span> <span class="n">ListView</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="n">grid_columns</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;Title&#39;</span><span class="p">),</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;70%&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s">&#39;date_created&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;Date created&#39;</span><span class="p">),</span> <span class="s">&#39;datetime&#39;</span><span class="p">,</span> <span class="s">&#39;30%&#39;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">grid_actions</span> <span class="o">=</span> <span class="p">()</span>
</pre></div>
</div>
<p><cite>grid_columns</cite> property determines which fields from your model will be rendered as datagrid columns. This property
must be a tuple, which contains items with column configuration:</p>
<ul class="simple">
<li>Model&#8217;s field name</li>
<li>Column name</li>
<li>Data type. Possible values: &#8216;string&#8217;, &#8216;datetime&#8217;, &#8216;time&#8217;, &#8216;date&#8217;, &#8216;boolean&#8217;, &#8216;image&#8217;</li>
<li>Width in percents</li>
</ul>
<p><cite>grid_actions</cite> property determines which actions can be done with each row. Default actions are:</p>
<ul class="simple">
<li>Insert</li>
<li>Update</li>
<li>Delete</li>
</ul>
<p>By defining this property, you can add some additional actions to your datatable.</p>
<p>This property must be a tuple, which contains items with action configuration:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;grid_actions&#39;</span><span class="p">:</span> <span class="p">(</span>
    <span class="p">(</span><span class="s">&#39;change-password&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;Change Password&#39;</span><span class="p">),</span> <span class="s">&#39;edit&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This example contains one additional action to change password.</p>
<p>First element if tuple is URL for redirect after user click on action button. In the example, user will be redirected to
URL like <cite>/&lt;module_slug&gt;/change-password/&lt;row_pk&gt;/</cite>. Of course, you should define this URL in your app URL scheme:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="kn">from</span> <span class="nn">dartcms.utils.config</span> <span class="kn">import</span> <span class="n">DartCMSConfig</span>
<span class="kn">from</span> <span class="nn">dartcms.views</span> <span class="kn">import</span> <span class="n">DeleteObjectView</span><span class="p">,</span> <span class="n">GridView</span>
<span class="kn">from</span> <span class="nn">forms</span> <span class="kn">import</span> <span class="n">UserForm</span>
<span class="kn">from</span> <span class="nn">views</span> <span class="kn">import</span> <span class="n">ChangePasswordView</span><span class="p">,</span> <span class="n">CMSUserInsertView</span><span class="p">,</span> <span class="n">CMSUserUpdateView</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">DartCMSConfig</span><span class="p">({</span>
    <span class="s">&#39;model&#39;</span><span class="p">:</span> <span class="n">User</span><span class="p">,</span>
    <span class="s">&#39;grid&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;grid_columns&#39;</span><span class="p">:</span> <span class="p">(</span>
            <span class="p">(</span><span class="s">&#39;username&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;Username&#39;</span><span class="p">),</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;60%&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;last_login&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;Last Login&#39;</span><span class="p">),</span> <span class="s">&#39;datetime&#39;</span><span class="p">,</span> <span class="s">&#39;20%&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;is_staff&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;Staff&#39;</span><span class="p">),</span> <span class="s">&#39;boolean&#39;</span><span class="p">,</span> <span class="s">&#39;10%&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s">&#39;is_active&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;Active&#39;</span><span class="p">),</span> <span class="s">&#39;boolean&#39;</span><span class="p">,</span> <span class="s">&#39;10%&#39;</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="s">&#39;grid_actions&#39;</span><span class="p">:</span> <span class="p">(</span>
            <span class="p">(</span><span class="s">&#39;change-password&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;Change Password&#39;</span><span class="p">),</span> <span class="s">&#39;edit&#39;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">},</span>
    <span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;form_class&#39;</span><span class="p">:</span> <span class="n">UserForm</span>
    <span class="p">}</span>
<span class="p">})</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="n">GridView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="o">.</span><span class="n">grid</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;index&#39;</span><span class="p">),</span>
    <span class="o">...</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^change-password/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="n">ChangePasswordView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;change_password&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This code snippet illustrates how DartCMS app named <cite>users</cite> works with this custom grid action. As you can see, we have
pretty simple config here: we are passing <cite>model</cite> keyword argument (because our <cite>GridView</cite> is inherited from
Django&#8217;s <cite>ListView</cite>).</p>
</div>
<div class="section" id="dartcms-views-insertobjectview">
<h2>dartcms.views.InsertObjectView<a class="headerlink" href="#dartcms-views-insertobjectview" title="Permalink to this headline">¶</a></h2>
<p>This view implements insert features for your model. It&#8217;s inherited from <cite>django.views.generic.CreateView</cite> and can be
configured in a same way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">...</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">DartCMSConfig</span><span class="p">({</span>
    <span class="s">&#39;model&#39;</span><span class="p">:</span> <span class="n">User</span><span class="p">,</span>
    <span class="o">...</span>
    <span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;form_class&#39;</span><span class="p">:</span> <span class="n">UserForm</span>
    <span class="p">}</span>
<span class="p">})</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^insert/$&#39;</span><span class="p">,</span> <span class="n">CMSUserInsertView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="o">.</span><span class="n">form</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;insert&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="dartcms-views-updateobjectview">
<h2>dartcms.views.UpdateObjectView<a class="headerlink" href="#dartcms-views-updateobjectview" title="Permalink to this headline">¶</a></h2>
<p>This view implements update features for your model. It&#8217;s inherited from <cite>django.views.generic.UpdateView</cite> and can be
configured in a same way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">...</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">DartCMSConfig</span><span class="p">({</span>
    <span class="s">&#39;model&#39;</span><span class="p">:</span> <span class="n">User</span><span class="p">,</span>
    <span class="o">...</span>
    <span class="s">&#39;form&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;form_class&#39;</span><span class="p">:</span> <span class="n">UserForm</span>
    <span class="p">}</span>
<span class="p">})</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^update/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="n">CMSUserUpdateView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="o">.</span><span class="n">form</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;update&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="dartcms-views-deleteobjectview">
<h2>dartcms.views.DeleteObjectView<a class="headerlink" href="#dartcms-views-deleteobjectview" title="Permalink to this headline">¶</a></h2>
<p>This view implements delete features for your model. It&#8217;s inherited from <cite>django.views.generic.DeleteView</cite> and can be
configured in this way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">...</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">DartCMSConfig</span><span class="p">({</span>
    <span class="s">&#39;model&#39;</span><span class="p">:</span> <span class="n">User</span><span class="p">,</span>
<span class="p">})</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^delete/(?P&lt;pk&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="n">DeleteObjectView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="o">.</span><span class="n">base</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;delete&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Note, that here we do not need form configuration, so we will pass only base config here - <cite>model</cite> keyword argument.</p>
</div>
<div class="section" id="dartcms-views-jsonview">
<h2>dartcms.views.JSONView<a class="headerlink" href="#dartcms-views-jsonview" title="Permalink to this headline">¶</a></h2>
<p>This is pretty simple view to render response as JSON. Nothing special here. Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">dartcms.views</span> <span class="kn">import</span> <span class="n">JSONView</span>


<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">JSONView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s">&#39;result&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
            <span class="s">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">}</span>
        <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-inlines">
<h2>Working with Inlines<a class="headerlink" href="#working-with-inlines" title="Permalink to this headline">¶</a></h2>
<p>If you want to add related models creation into your forms, you can use special views:
<cite>dartcms.views.InsertObjectWithInlinesView</cite> and <cite>dartcms.views.UpdateObjectWithInlinesView</cite>.</p>
<p>These views are based on the Django Extra Views package, so you
can find full documentation here - <a class="reference external" href="https://github.com/AndrewIngram/django-extra-views">https://github.com/AndrewIngram/django-extra-views</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Welcome to DartCMS documentation!</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#modules">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#installation">Installation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#contents">Contents</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l3"><a class="reference internal" href="app_forking.html">Forking Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamic_loading.html">Dynamic Models Loading</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Generic Views</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="app_forking.html">Forking Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_loading.html">Dynamic Models Loading</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Generic Views</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#views-configuration">Views Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dartcms-views-gridview">dartcms.views.GridView</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dartcms-views-insertobjectview">dartcms.views.InsertObjectView</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dartcms-views-updateobjectview">dartcms.views.UpdateObjectView</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dartcms-views-deleteobjectview">dartcms.views.DeleteObjectView</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dartcms-views-jsonview">dartcms.views.JSONView</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-inlines">Working with Inlines</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/generic_views.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Dmitry Astrikov.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="_sources/generic_views.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>