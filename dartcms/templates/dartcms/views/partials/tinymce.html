{% load i18n %}

<script type="text/javascript">
    function mceInit() {
        tinymce.init({
            {% get_current_language as LANG %}
            {% if LANG == 'ru-ru' %}
            language: 'ru',
            {% endif %}
            selector: ".rte",
            content_css: 'https://netdna.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css',
            noneditable_noneditable_class: 'fa',
            plugins: 'fontawesome noneditable advlist autolink link image lists charmap print preview code table',
            toolbar: 'undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | table | fontsizeselect | fontawesome',
            file_browser_callback: filebrowserCallback,
            relative_urls: false,
            remove_script_host: false,
            extended_valid_elements: 'span[*]'
        });
    }
    function filebrowserCallback(field_name, url, type, win) {
        tinymce.activeEditor.windowManager.open({
            file: '{% url 'dartcms:filemanager:index' %}',
            title: 'Filemanager',
            width: 900,
            height: 450,
            resizable: 'yes'
        }, {
            setUrl: function (url) {
                url = url.replace('//', '/');
                win.document.getElementById(field_name).value = url;
            }
        });
        return false;
    }
    function mceDestroy() {
        tinymce.remove();
    }
</script>